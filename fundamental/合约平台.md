å…ˆåˆæ­¥ä»‹ç»ä¸€ä¸‹å‡ ç§å¸¸ç”¨çš„åˆçº¦å¼€å‘å¹³å°ã€‚

- Remix

  Remixæ˜¯ä¸€ä¸ªåŸºäºæµè§ˆå™¨çš„åˆçº¦å¼€å‘ã€ç¼–è¯‘ã€éƒ¨ç½²ç¯å¢ƒã€‚ä¸€èˆ¬æƒ…å†µä¸‹ï¼Œåœ¨æˆ‘ä»¬å¼€å‘ä¸€äº›å°åˆçº¦æ—¶ä¼šä½¿ç”¨åˆ°ã€‚

  å…¶ä¸­remixæ˜¯åŸºäºæµè§ˆå™¨çš„ï¼Œä½¿ç”¨æ—¶å’Œæˆ‘ä»¬å¹³æ—¶çš„å¼€å‘ä¹ æƒ¯æˆ–å¤šæˆ–å°‘ä¼šæœ‰ä¸€äº›ä¸ä¸€è‡´ã€‚å¦‚æœæˆ‘ä»¬å¸Œæœ›ä»æœ¬åœ°è¯»å–ä»£ç æ–‡ä»¶ï¼Œå¯ä»¥å®‰è£…remixdï¼Œç›¸åº”çš„æŒ‡ä»¤ä¸ºï¼š

  ```js
  npm install -g @remix-project/remixd
  ```

  éšåå°†æœ¬åœ°çš„æ–‡ä»¶å’Œæµè§ˆå™¨çš„remixç¯å¢ƒè¿›è¡Œå…±äº«

  ![image-20221002154109938](åˆçº¦å¹³å°.assets/image-20221002154109938.png)

  ![image-20221002154234069](åˆçº¦å¹³å°.assets/image-20221002154234069.png)



- Truffle + Ganache

  Truffleæ˜¯ä¸€ä¸ªç”¨äºå¼€å‘ä»¥å¤ªåŠæ™ºèƒ½åˆçº¦çš„ç³»åˆ—å·¥å…·ã€‚åœ¨æ™ºèƒ½åˆçº¦å¼€å‘æ—¶ï¼Œä¸€èˆ¬é¦–é€‰truffleå’Œganacheçš„ç»„åˆæ–¹å¼ã€‚

  ç›¸åº”çš„å®˜æ–¹ç½‘ç«™ï¼šhttps://trufflesuite.com/

  **Truffleçš„ä½¿ç”¨**

  ä¸»è¦å‚è€ƒå®˜æ–¹æ–‡æ¡£ã€‚https://trufflesuite.com/docs/truffle

  ```js
  npm install -g truffle
  
  truffle version
  ```

  é€šè¿‡è¿è¡Œtruffle initæŒ‡ä»¤ï¼Œä¼šåˆå§‹åŒ–ä¸€ä¸ªç©ºç™½é¡¹ç›®ã€‚é€šè¿‡è¿è¡Œtruffle unbox metacoinä¼šåˆå§‹åŒ–ä¸€ä¸ªç‰¹å®šæ¨¡æ¿çš„é¡¹ç›®ã€‚

  ![image-20221002170515269](åˆçº¦å¹³å°.assets/image-20221002170515269.png)

  

  ![image-20221002170527687](åˆçº¦å¹³å°.assets/image-20221002170527687.png)

  **contractsç›®å½•ï¼šå­˜æ”¾solidityåˆçº¦æ–‡ä»¶çš„ç›®å½•**

  **migrationsç›®å½•ï¼šå­˜æ”¾éƒ¨ç½²è„šæœ¬æ–‡ä»¶çš„ç›®å½•**

  **testç›®å½•ï¼šå­˜æ”¾æµ‹è¯•è„šæœ¬æ–‡ä»¶çš„ç›®å½•**

  **truffle-config.js:truffleçš„é…ç½®æ–‡ä»¶**

  **Truffleç”Ÿå‘½å‘¨æœŸ**ï¼š

  **truffle compile ç¼–è¯‘åˆçº¦**.ç¼–è¯‘ä¹‹åçš„åˆçº¦æ–‡ä»¶ä¼šè¢«æ”¾ç½®åœ¨build/contractsç›®å½•ä¸­ã€‚ä¸è¦ä¿®æ”¹è¯¥éƒ¨åˆ†æ•°æ®ã€‚

  ![image-20221002211001517](åˆçº¦å¹³å°.assets/image-20221002211001517.png)

  **truffle migrate éƒ¨ç½²åˆçº¦**.

  éƒ¨ç½²åˆçº¦éœ€è¦æˆ‘ä»¬å»ç¼–å†™è¿ç§»è„šæœ¬ã€‚è¿ç§»è„šæœ¬éœ€è¦æ”¾ç½®åœ¨migrationsç›®å½•ä¸‹ã€‚

  æˆ‘ä»¬åœ¨è¯¥ç›®å½•ä¸‹æ–°å»ºäº†ä¸€ä¸ª1_counter_migration.jsæ–‡ä»¶

  ```js
  //è¯¥è¡Œä»£ç è¡¨ç¤ºçš„æ˜¯truffleéœ€è¦å’Œå“ªäº›åˆçº¦è¿›è¡Œäº¤äº’ï¼Œé‡Œé¢çš„å‚æ•°æ˜¯åˆçº¦çš„åç§°ï¼Œä¸æ˜¯åˆçº¦æ–‡ä»¶çš„åç§°
  var Counter = artifacts.require('Counter');
  //æ‰€æœ‰è¿ç§»éƒ½å¿…é¡»é€šè¿‡module.exportsæ¥è¿›è¡Œå¯¼å‡ºã€‚å‡½æ•°ç¬¬ä¸€ä¸ªå‚æ•°æ°¸è¿œéƒ½åº”è¯¥æ˜¯deployer
  module.exports = function(deployer){
      deployer.deploy(Counter);
  }
  ```

  **truffle test** æµ‹è¯•åˆçº¦.

  éœ€è¦åœ¨testç›®å½•ä¸‹æ–°å»ºä¸€ä¸ªæµ‹è¯•è„šæœ¬ã€‚æµ‹è¯•è„šæœ¬å¯ä»¥å†™jsã€tsç­‰ï¼Œä¹Ÿå¯ä»¥å†™æˆsolidity

  ```solidity
  pragma solidity ^0.8.0;
  
  import "truffle/Assert.sol";
  import "truffle/DeployedAddresses.sol";
  import "../contracts/Counter.sol";
  
  contract TestCounter{
  
      function testNumber() public{
      	//DeployedAddresses.Counter()ç”¨æ¥è·å–éƒ¨ç½²çš„åˆçº¦å¯¹è±¡
         Counter counter = Counter(DeployedAddresses.Counter());
         //åç»­æ–­è¨€åˆ¤æ–­å€¼æ˜¯å¦åŒ¹é…
         Assert.equal(counter.get(), 0, "xxxxx");
      }
  }
  ```

  **truffleæäº¤åˆçº¦åˆ°goerliæµ‹è¯•ç½‘**

  **1.åœ¨truffle-configé…ç½®æ–‡ä»¶ä¸­ï¼Œéœ€è¦åŠ å…¥å¦‚ä¸‹ä»£ç ï¼ŒHDWalletProvideræ˜¯æä¾›é’±åŒ…è´¦å·ï¼Œæ‰§è¡Œäº¤æ˜“æ—¶éœ€è¦æœ‰ç§é’¥è¿›è¡Œç­¾åç­‰ã€‚.mnemonicæ˜¯ä¸€ä¸ªåŠ©è®°è¯æ–‡ä»¶ï¼Œåˆ©ç”¨åŠ©è®°è¯å¯ä»¥ç”Ÿæˆå¯¹åº”çš„è´¦å·ã€‚å¦‚æœæç¤ºæ‰¾ä¸åˆ°truffle/hdwalleté‚£ä¹ˆéœ€è¦åœ¨truffleæ‰€åœ¨æ ¹ç›®å½•ä¸‹æ‰§è¡Œnpm install.**

  ```js
  const HDWalletProvider = require('@truffle/hdwallet-provider');
  const fs = require('fs');
  const mnemonic = fs.readFileSync(".mnemonic").toString().trim();
  ```

  **2.åœ¨truffle-config.jsæ–‡ä»¶ä¸­ï¼Œnetworkséœ€è¦è®¾ç½®goerliæµ‹è¯•ç½‘ä¿¡æ¯ã€‚å…¶ä¸­goerliæµ‹è¯•ç½‘çš„åœ°å€éœ€è¦åœ¨https://infura.io/ç½‘ç«™æ³¨å†Œï¼Œä¸è¿‡æ˜¯å…è´¹çš„ã€‚**

  ```js
  /**
   * Use this file to configure your truffle project. It's seeded with some
   * common settings for different networks and features like migrations,
   * compilation, and testing. Uncomment the ones you need or modify
   * them to suit your project as necessary.
   *
   * More information about configuration can be found at:
   *
   * https://trufflesuite.com/docs/truffle/reference/configuration
   * 
   * Hands-off deployment with Infura
   * --------------------------------
   *
   * Do you have a complex application that requires lots of transactions to deploy?
   * Use this approach to make deployment a breeze ğŸ–ï¸:
   *
   * Infura deployment needs a wallet provider (like @truffle/hdwallet-provider)
   * to sign transactions before they're sent to a remote public node. 
   * Infura accounts are available for free at ğŸ”: https://infura.io/register
   *
   * You'll need a mnemonic - the twelve word phrase the wallet uses to generate
   * public/private key pairs. You can store your secrets ğŸ¤ in a .env file. 
   * In your project root, run `$ npm install dotenv`. 
   * Create .env (which should be .gitignored) and declare your MNEMONIC 
   * and Infura PROJECT_ID variables inside.
   * For example, your .env file will have the following structure:
   * 
   * MNEMONIC = <Your 12 phrase mnemonic>
   * PROJECT_ID = <Your Infura project id>
   * 
   * Deployment with Truffle Dashboard (Recommended for best security practice)
   * --------------------------------------------------------------------------
   * 
   * Are you concerned about security and minimizing rekt status ğŸ¤”?
   * Use this method for best security:
   * 
   * Truffle Dashboard lets you review transactions in detail, and leverages 
   * MetaMask for signing, so there's no need to copy-paste your mnemonic. 
   * More details can be found at ğŸ”: 
   * 
   * https://trufflesuite.com/docs/truffle/getting-started/using-the-truffle-dashboard/
   */
  
  // require('dotenv').config();
  // const { MNEMONIC, PROJECT_ID } = process.env;
  
  const HDWalletProvider = require('@truffle/hdwallet-provider');
  const fs = require('fs');
  const mnemonic = fs.readFileSync(".mnemonic").toString().trim();
  
  module.exports = {
    /**
     * Networks define how you connect to your ethereum client and let you set the
     * defaults web3 uses to send transactions. If you don't specify one truffle
     * will spin up a managed Ganache instance for you on port 9545 when you
     * run `develop` or `test`. You can ask a truffle command to use a specific
     * network from the command line, e.g
     *
     * $ truffle test --network <network-name>
     */
  
    networks: {
      // Useful for testing. The `development` name is special - truffle uses it by default
      // if it's defined here and no other network is specified at the command line.
      // You should run a client (like ganache, geth, or parity) in a separate terminal
      // tab if you use this network and you must also set the `host`, `port` and `network_id`
      // options below to some value.
      //
      // development: {
      //  host: "127.0.0.1",     // Localhost (default: none)
      //  port: 8545,            // Standard Ethereum port (default: none)
      //  network_id: "*",       // Any network (default: none)
      // },
      //
      // An additional network, but with some advanced optionsâ€¦
      // advanced: {
      //   port: 8777,             // Custom port
      //   network_id: 1342,       // Custom network
      //   gas: 8500000,           // Gas sent with each transaction (default: ~6700000)
      //   gasPrice: 20000000000,  // 20 gwei (in wei) (default: 100 gwei)
      //   from: <address>,        // Account to send transactions from (default: accounts[0])
      //   websocket: true         // Enable EventEmitter interface for web3 (default: false)
      // },
      //
      // Useful for deploying to a public network.
      // Note: It's important to wrap the provider as a function to ensure truffle uses a new provider every time.
      goerli: {
        provider: () => new HDWalletProvider(mnemonic, `https://goerli.infura.io/v3/11cea8aafae6482b864a6c85b9cbe6e7`),
        network_id: 5,       // Goerli's id
        confirmations: 2,    // # of confirmations to wait between deployments. (default: 0)
        timeoutBlocks: 200,  // # of blocks before a deployment times out  (minimum/default: 50)
        skipDryRun: true     // Skip dry run before migrations? (default: false for public nets )
      }
      //
      // Useful for private networks
      // private: {
      //   provider: () => new HDWalletProvider(MNEMONIC, `https://network.io`),
      //   network_id: 2111,   // This network is yours, in the cloud.
      //   production: true    // Treats this network as if it was a public net. (default: false)
      // }
    },
  
    // Set default mocha options here, use special reporters, etc.
    mocha: {
      // timeout: 100000
    },
  
    // Configure your compilers
    compilers: {
      solc: {
        version: "0.8.17",      // Fetch exact version from solc-bin (default: truffle's version)
        // docker: true,        // Use "0.5.1" you've installed locally with docker (default: false)
        // settings: {          // See the solidity docs for advice about optimization and evmVersion
        //  optimizer: {
        //    enabled: false,
        //    runs: 200
        //  },
        //  evmVersion: "byzantium"
        // }
      }
    },
  
    // Truffle DB is currently disabled by default; to enable it, change enabled:
    // false to enabled: true. The default storage location can also be
    // overridden by specifying the adapter settings, as shown in the commented code below.
    //
    // NOTE: It is not possible to migrate your contracts to truffle DB and you should
    // make a backup of your artifacts to a safe location before enabling this feature.
    //
    // After you backed up your artifacts you can utilize db by running migrate as follows:
    // $ truffle migrate --reset --compile-all
    //
    // db: {
    //   enabled: false,
    //   host: "127.0.0.1",
    //   adapter: {
    //     name: "sqlite",
    //     settings: {
    //       directory: ".db"
    //     }
    //   }
    // }
  };
  ```

  **3.æ‰§è¡ŒæŒ‡ä»¤ truffle migrate --network goerli**.ç¡®ä¿å¡«å…¥çš„åŠ©è®°è¯è´¦å·ä¸­æœ‰goerliæµ‹è¯•ç½‘çš„ethã€‚å¦‚ä¸‹å›¾æ‰€ç¤ºã€‚

  ![image-20221003125202672](åˆçº¦å¹³å°.assets/image-20221003125202672.png)

- Hardhat

  Hardhatä¹Ÿæ˜¯ä¸€ä¸ªç”¨äºå¼€å‘ã€éƒ¨ç½²ã€æµ‹è¯•æ™ºèƒ½åˆçº¦çš„å¹³å°å·¥å…·ã€‚

  https://hardhat.org/

