先初步介绍一下几种常用的合约开发平台。

- Remix

  Remix是一个基于浏览器的合约开发、编译、部署环境。一般情况下，在我们开发一些小合约时会使用到。

  其中remix是基于浏览器的，使用时和我们平时的开发习惯或多或少会有一些不一致。如果我们希望从本地读取代码文件，可以安装remixd，相应的指令为：

  ```js
  npm install -g @remix-project/remixd
  ```

  随后将本地的文件和浏览器的remix环境进行共享

  ![image-20221002154109938](合约平台.assets/image-20221002154109938.png)

  ![image-20221002154234069](合约平台.assets/image-20221002154234069.png)



- Truffle + Ganache

  Truffle是一个用于开发以太坊智能合约的系列工具。在智能合约开发时，一般首选truffle和ganache的组合方式。

  相应的官方网站：https://trufflesuite.com/

  **Truffle的使用**

  主要参考官方文档。https://trufflesuite.com/docs/truffle

  ```js
  npm install -g truffle
  
  truffle version
  ```

  通过运行truffle init指令，会初始化一个空白项目。通过运行truffle unbox metacoin会初始化一个特定模板的项目。

  ![image-20221002170515269](合约平台.assets/image-20221002170515269.png)

  

  ![image-20221002170527687](合约平台.assets/image-20221002170527687.png)

  **contracts目录：存放solidity合约文件的目录**

  **migrations目录：存放部署脚本文件的目录**

  **test目录：存放测试脚本文件的目录**

  **truffle-config.js:truffle的配置文件**

  **Truffle生命周期**：

  **truffle compile 编译合约**.编译之后的合约文件会被放置在build/contracts目录中。不要修改该部分数据。

  ![image-20221002211001517](合约平台.assets/image-20221002211001517.png)

  **truffle migrate 部署合约**.

  部署合约需要我们去编写迁移脚本。迁移脚本需要放置在migrations目录下。

  我们在该目录下新建了一个1_counter_migration.js文件

  ```js
  //该行代码表示的是truffle需要和哪些合约进行交互，里面的参数是合约的名称，不是合约文件的名称
  var Counter = artifacts.require('Counter');
  //所有迁移都必须通过module.exports来进行导出。函数第一个参数永远都应该是deployer
  module.exports = function(deployer){
      deployer.deploy(Counter);
  }
  ```

  **truffle test** 测试合约.

  需要在test目录下新建一个测试脚本。测试脚本可以写js、ts等，也可以写成solidity

  ```solidity
  pragma solidity ^0.8.0;
  
  import "truffle/Assert.sol";
  import "truffle/DeployedAddresses.sol";
  import "../contracts/Counter.sol";
  
  contract TestCounter{
  
      function testNumber() public{
      	//DeployedAddresses.Counter()用来获取部署的合约对象
         Counter counter = Counter(DeployedAddresses.Counter());
         //后续断言判断值是否匹配
         Assert.equal(counter.get(), 0, "xxxxx");
      }
  }
  ```

  

  

- Hardhat

  Hardhat也是一个用于开发、部署、测试智能合约的平台工具。

  https://hardhat.org/

